dependencies:
  override:
      - sudo apt-get install -y unzip curl
      - curl -sSL https://raw.githubusercontent.com/aspnet/Home/dev/dnvminstall.sh | DNX_BRANCH=dev sh && source ~/.dnx/dnvm/dnvm.sh
      - sudo apt-get install -y libunwind8
      - dnvm upgrade -r coreclr
      - npm install
      - whereis dnx >> dnxpath.sh
      - whereis dnu >> dnupath.sh 

test:
  override:
      - source dnxpath.sh
      - source dnupath.sh
      - grunt build -vv
      - grunt test
      - pwd | ls -al
teardown:
    pre:
        - mkdir $CIRCLE_ARTIFACTS/CIRCLE_BUILD_NUM
        - cp ~/consuldotnext/bin/*.* $CIRCLE_ARTIFACTS/CIRCLE_BUILD_NUM
